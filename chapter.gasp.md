<div xmlns="http://www.w3.org/1999/xhtml" role="" class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="chapter.gasp"></a>Chapter 31. gasp - Grid-fitting And Scan-conversion Procedure</h2></div></div></div><div role="fragment" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm80794406656"></a>Overview</h2></div></div></div><div role="specification" class="section"><div class="titlepage"><div><div><h3 class="title"><a name="section.31.1.1"></a>Specification</h3></div></div></div><p role="">This table contains information which describes the
          preferred rasterization techniques for the typeface when it
          is rendered on grayscale-capable devices. This table also
          has some use for monochrome devices, which may use the table
          to turn off hinting at very large or small sizes, to improve
          performance.</p><p role="">At very small sizes, the best appearance on grayscale
          devices can usually be achieved by rendering the glyphs in
          grayscale without using hints. At intermediate sizes,
          hinting and monochrome rendering will usually produce the
          best appearance. At large sizes, the combination of hinting
          and grayscale rendering will typically produce the best
          appearance.</p><p role="">If the <a role="" class="link" href="chapter.gasp.html" title="Chapter 31. gasp - Grid-fitting And Scan-conversion Procedure">gasp</a> table is not present in a typeface, the
          rasterizer may apply default rules to decide how to render
          the glyphs on grayscale devices.</p><p role="">The <a role="" class="link" href="chapter.gasp.html" title="Chapter 31. gasp - Grid-fitting And Scan-conversion Procedure">gasp</a> table consists of a header followed by
          groupings of <a role="" class="link" href="chapter.gasp.html" title="Chapter 31. gasp - Grid-fitting And Scan-conversion Procedure">gasp</a> records:</p><div class="table"><a name="idm80794400448"></a><p class="title"><strong>Table 31.1. gasp Table</strong></p><div class="table-contents"><table role="" class="table" summary="gasp Table" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th role="">Type</th><th role="">Name</th><th role="">Description</th><td class="auto-generated"> </td></tr></thead><tbody><tr><td role="">USHORT</td><td role="">version</td><td role="">Version number (set to 0)</td><td class="auto-generated"> </td></tr><tr><td role="">USHORT</td><td role="">numRanges</td><td role="">Number of records to follow</td><td class="auto-generated"> </td></tr><tr><td role="">GASPRANGE</td><td role="">gaspRange [numRanges]</td><td role="">Sorted by ppem</td><td class="auto-generated"> </td></tr></tbody></table></div></div><br class="table-break"/><p role="">Each GASPRANGE record looks like this:</p><div class="table"><a name="idm80794393280"></a><p class="title"><strong>Table 31.2. </strong></p><div class="table-contents"><table role="" class="table" border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr><th role="">Type</th><th role="">Name</th><th role="">Description</th><td class="auto-generated"> </td></tr></thead><tbody><tr><td role="">USHORT</td><td role="">rangeMaxPPEM</td><td role="">Upper limit of range, in PPEM</td><td class="auto-generated"> </td></tr><tr><td role="">USHORT</td><td role="">rangeGaspBehavior</td><td role="">Flags describing desired rasterizer
              behavior.</td><td class="auto-generated"> </td></tr></tbody></table></div></div><br class="table-break"/><p role="">There are two flags for the rangeGaspBehavior
          flags:</p><div class="informaltable"><table role="" class="informaltable" border="1"><colgroup><col width="3cm"/><col width="3cm"/></colgroup><thead><tr><th role="">Flag</th><th role="">Meaning</th></tr></thead><tbody><tr><td role="">GASP_GRIDFIT</td><td role="">Use gridfitting</td></tr><tr><td role="">GASP_DOGRAY</td><td role="">Use grayscale rendering</td></tr></tbody></table></div><p role="">The set of bit flags may be extended in the future.The
          four currently defined values of rangeGaspBehavior would
          have the following uses:</p><div class="informaltable"><table role="" class="informaltable" border="1"><colgroup><col width="3cm"/><col width="3cm"/><col width="3cm"/></colgroup><thead><tr><th role="">Flag</th><th role="">Value</th><th role="">Meaning</th></tr></thead><tbody><tr><td role="">GASP_DOGRAY</td><td role="">0x0002</td><td role="">small sizes, typically ppem&lt;9</td></tr><tr><td role="">GASP_GRIDFIT</td><td role="">0x0001</td><td role="">medium sizes, typically 9&lt;=ppem&lt;=16</td></tr><tr><td role="">GASP_DOGRAY|GASP_GRIDFIT</td><td role="">0x0003</td><td role="">large sizes, typically ppem&gt;16</td></tr><tr><td role="">(neither)</td><td role="">0x0000</td><td role="">optional for very large sizes, typically
                  ppem&gt;2048</td></tr></tbody></table></div><p role="">The records in the gaspRange[] array must be sorted in
          order of increasing rangeMaxPPEM value. The last record
          should use 0xFFFF as a sentinel value for rangeMaxPPEM and
          should describe the behavior desired at all sizes larger
          than the previous record's upper limit. If the only entry in
          <a role="" class="link" href="chapter.gasp.html" title="Chapter 31. gasp - Grid-fitting And Scan-conversion Procedure">gasp</a> is the 0xFFFF sentinel value, the
          behavior described will be used for all sizes.</p><h4><a name="idm80794368080"></a>Sample <a role="" class="link" href="chapter.gasp.html" title="Chapter 31. gasp - Grid-fitting And Scan-conversion Procedure">gasp</a> table</h4><div class="informaltable"><table role="" class="informaltable" border="1"><colgroup><col width="3cm"/><col width="3cm"/><col width="3cm"/></colgroup><thead><tr><th role="">Flag</th><th role="">Value</th><th role="">Meaning</th></tr></thead><tbody><tr><td role="">version</td><td role="">0x0000</td><td role=""> </td></tr><tr><td role="">numRanges</td><td role="">0x0003</td><td role=""> </td></tr><tr><td role="">Range[0], Flag</td><td role="">0x0008 0x0002</td><td role="">ppem &lt;= 8, grayscale only</td></tr><tr><td role="">Range[1], Flag</td><td role="">0x0010 0x0001</td><td role="">9&lt;=ppem &lt;= 16, gridfit only</td></tr><tr><td role="">Range[2], Flag</td><td role="">0xFFFF 0x0003</td><td role="">16 &lt; ppem, gridfit and grayscale</td></tr></tbody></table></div></div></div></div>