<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<section role="compiler">
      <title>Compiler</title>
      <code-fragment id="lookuptable.methods"><code-title>Compile singlePos lookups</code-title>
  protected Block contextLookupFromXML (Element lookupSubtable,
                                        Element table,
                                        Map&lt;Element, Block&gt; blockCache,
					Map&lt;String, Integer&gt; lookupIndices)
      throws InvalidFontException, UnsupportedFontException {

    String format = lookupSubtable.getAttribute ("format");
    if ("1".equals (format)) {
      return contextLookupFormat1FromXML (lookupSubtable, table,
                                          blockCache, lookupIndices); }
    if ("2".equals (format)) {
      return contextLookupFormat2FromXML (lookupSubtable, table,
                                          blockCache, lookupIndices); }
    if ("3".equals (format)) {
      return contextLookupFormat3FromXML (lookupSubtable, table,
                                          blockCache, lookupIndices); }

    /* cannot get here with a valid document */
    throw new InvalidFontException (
      "invalid contextual lookup format (" + format + ")");
  }
</code-fragment>
    </section>
    
