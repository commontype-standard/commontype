<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<section role="implementation">
      <title>Implementation</title>
      <code-fragment id="gsub_1_2"><code-title>Execute GSUB 1/2 subtable and return</code-title>
  { int coverageOffset = stOffset + getOffset (stOffset + 2);
    int inPos = curGlyph;

    int ci = getCoverageIndex (gr.glyphAt (inPos), coverageOffset);
    if (ci  == -1) {
      return lookupNotApplied; }

    if (! gr.isLookupApplied (lookupIndex, curGlyph, inPos)) {
      return lookupNotApplied; }

    int oldGlyphId = gr.glyphAt (inPos);
    int newGlyphId = getGlyphID (stOffset + 6 + 2*ci);

    if (listener != null) {
      listener.replace (oldGlyphId, newGlyphId);
      listener.applyingSubtable (lookupIndex, gr, curGlyph, "GSUB", stOffset); }

    gr.replace (inPos, newGlyphId);

    return new LookupResult (true, inPos + 1, 0); }
</code-fragment>
    </section>
    
