<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<section role="compiler">
      <title>Compiler</title>
      <para>Lookups are referenced by indices. As we fill the
          FeatureList table, we also remember the index of a
          Lookup by storing it in the
          <sgmltag>attribute</sgmltag> index. This method must be
          called before indices are needed.</para>
      <code-fragment id="lookuptable.methods">
  public Block lookupListTableFromXML (Element t, Element table,
                                       Map&lt;Element, Block&gt; blockCache,
				       Map&lt;String, Integer&gt; lookupIndices)
      throws InvalidFontException, UnsupportedFontException {

    { String name = t.getAttribute ("name");
      if (name != null &amp;&amp; ! "".equals (name)) {
        t = resolveXMLid (table, name); }}

    NodeList lookups = t.getChildNodes ();
    int lookupCount = lookups.getLength ();

    for (int i = 0; i &lt; lookupCount; i++) {
      Element lookup = (Element) lookups.item (i);
      lookupIndices.put (lookup.getAttribute ("id"), i); }

    Block me = new Block (2 + 2 * lookupCount, lookupCount);
    me.setuint16 (0, lookupCount);
    for (int i = 0; i &lt; lookupCount; i++) {
      Element lookup = (Element) lookups.item (i);
      me.setOffset (2 + 2*i,
                    lookupTableFromXML (lookup, table, blockCache,
                                        lookupIndices)); }

    return me;
  }
</code-fragment>
    </section>
    
