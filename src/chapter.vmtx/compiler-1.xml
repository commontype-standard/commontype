<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<section role="compiler">
      <title>Compiler</title>
      <code-fragment id="vmtx.methods">
  public void fromXML (Element vmtx)
    throws InvalidFontException, UnsupportedFontException {

    NodeList metrics = vmtx.getChildNodes ();

    int vmetrics = 0;
    int tsbs = 0;
    for (int i = 0; i &lt; metrics.getLength (); i++) {
      Element x = (Element) metrics.item (i);
      if ("vMetric".equals (x.getTagName ())) {
        vmetrics++; }
      if ("tsb".equals (x.getTagName ())) {
        tsbs++; }}

    Block me = new Block (vmetrics*4 + tsbs*2, 0);

    int offset = 0;
    for (int i = 0; i &lt; metrics.getLength (); i++) {
      Element metric = (Element) metrics.item (i);
      if ("vMetric".equals (metric.getTagName ())) {
        me.setuint16 (offset,
                      Integer.decode (metric.getAttribute ("adv")).intValue ());
        me.setint16 (offset + 2,
                     Integer.decode (metric.getAttribute ("tsb")).intValue ());
        offset += 4; }
      if ("tsb".equals (metric.getTagName ())) {
        me.setFWord (offset,
                     Integer.decode (metric.getAttribute ("tsb")).intValue ());
        offset += 2; }}

    data = me.serialize ();
  }
</code-fragment>
    </section>
    
